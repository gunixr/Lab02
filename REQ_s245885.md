# Official Requirements Document

Author: Giuseppe Raffa

Date: 05/04/2020

Version: 1

# Contents
- [Abstract](#abstract)
- [Stakeholders](#stakeholders)
- [Context Diagram and interfaces](#context-diagram-and-interfaces)
	+ [Context Diagram](#context-diagram)
	+ [Interfaces](#interfaces) 
- [Stories and personas](#stories-and-personas)
- [Functional and non functional requirements](#functional-and-non-functional-requirements)
	+ [Functional Requirements](#functional-requirements)
	+ [Non functional requirements](#non-functional-requirements)
- [Use case diagram and use cases](#use-case-diagram-and-use-cases)
	+ [Use case diagram](#use-case-diagram)
	+ [Use cases](#use-cases)
	+ [Relevant scenarios](#relevant-scenarios)
- [Glossary](#glossary)

# Abstract

EZGas is a web application that allows users, called *drivers*, to collect informations about near gas stations. Drivers can select a gas station and the application, using Google Maps API, shows them the best route.

At the same time, gas station owners can use application to register their business, describe available fuel types with related prices and get more customers.


# Stakeholders

| Stakeholder name  | Description | 
| :---------------: | :-----------: |
| Drivers | They use the application to collect informations about near gas stations | 
| Gas station owners | They use the application to show position of them gas station, fuel types and related price |
| Developer | He is interested to develop a reability and user friendly web application |

# Context Diagram and interfaces

## Context Diagram

```plantuml
left to right direction
actor driver as d
actor "gas station owner" as gao
actor "Google Maps API" as gma
d -- (EZGas)
gao -- (EZGas)
gma -- (EZGas)
```

## Interfaces
| Actor | Logical Interface | Physical Interface  |
| :---: | :---------------: | :-----------------: |
| Driver | GUI | Screen, keyboard |
| Gas station owner | GUI | Screen, keyboard |
| Google Maps API | Web API | GPS |


# Stories and personas

Tom travels a lot for work and drives many kilometers every day. Finding a cheap gas station is very important to him, but it is not easy. Often Tom doesn't know the place where he is. But now Tom uses EZGas and refuel isn't a problem. In a few seconds Tom finds the most convenient gas station and the best route to get there.

John recently moved to the city and decided to invest in a gas station. Thanks to EZGas, John has quickly increase his customers highlighting low fuel price and the good location of gas station.

# Functional and non functional requirements

## Functional Requirements

| ID  | Description  |
| :-: | :----------: | 
| FR1 | Manage account registration |  
| FR2 | Update account information |
| FR3 | Manage drivers preferences about fuel type |
| FR4 | Filter gas stations based on location, fuel type and price |
| FR5 | GPS tracking at the selected service station |
| FR6 | Manage types of fuel and prices |
| FR7 | Manage gas station logo |

## Non Functional Requirements

| ID  | Type (efficiency, reliability, .. see iso 9126) | Description | Refers to |
| :-: | :---------------------------------------------: | :---------: | :-------: |
| NFR1 | Usability | Application should be used with no training by any drives and gas station owners | All FR |
| NFR2 | Performance | All functions should complete in < 1.0 sec | All FR |
| NFR3 | Portability | The application runs on every browser and on android/iOS OS | All FR |
| NFR4 | Localisation | Decimal numbers use . (dot) as decimal separator | All FR |
| NFR5 | Privacy | Application should be GDPR compliance | All FR |


# Use case diagram and use cases

## Use case diagram

```plantuml
left to right direction
actor driver as d
actor "gas station owner" as gao
actor "Google Maps API" as gma
d -- (FR1 Manage account registration)
gao -- (FR1 Manage account registration)
d -- (FR2 Update account information)
gao -- (FR2 Update account information)
d -- (FR3 Manage drivers preferences about fuel type)
d -- (FR4 Filter gas stations based on location, fuel type and price)
d -- (FR5 GPS tracking at the selected service station)
gma -- (FR5 GPS tracking at the selected service station)
gao -- (FR6 Manage types of fuel and prices)
gao -- (FR7 Manage gas station logo)
```
## Use Cases

### Use case 1, UC1 - FR1  Record usage of capsules by colleague

| Actors Involved        | Administrator |
| ------------- |:-------------:| 
|  Precondition     | Capsule T exists, colleague C exists |  
|  Post condition     | T.quantity_post < T.quantity_pre |
| | C.PersonalAccount.balance_post < C.PersonalAccount.balance_pre |
|  Nominal Scenario     | Administrator selects capsule type T, selects colleague C, Deduce quantity for capsule T, deduce price of T by account of colleague C|
|  Variants     | Account of colleague C has not enough money, issue warning |

### Use case 2, UC2 - FR2 Record usage of capsules by visitor

| Actors Involved        | Administrator |
| ------------- |:-------------:| 
|  Precondition     | Capsule T exists, visitor has no account |  
|  Post condition     | T.quantity_post < T.quantity_pre |
| | LaTazzaAccount.amount_post > LaTazzaAccount.amount_pre |
|  Nominal Scenario     | Administrator selects capsule type T, Deduce quantity for capsule T, add price of T on LaTazzaAccount.amount|
|  Variants     |  |

### Use case 3, UC3 - FR3 Record recharge of account of colleague

| Actors Involved        | Administrator |
| ------------- |:-------------:| 
|  Precondition     | Personal Account PA exists , quantity >0 |  
|  Post condition     | PA.balance_post = PA.balance_pre + quantity |
|  | LaTazzaAccount.balance_post = LaTazzaAccount.balance_pre + quantity  |
|  Nominal Scenario     | Administrator selects account PA of colleague C, increase account of  quantity, increase LaTazza account of quantity|
|  Variants     |  |

### Use case 4, UC4 - FR4 Record purchase of capsules

| Actors Involved        | Administrator |
| ------------- |:-------------:| 
|  Precondition     | Capsule type CT exists,  LaTazzaAccount.balance has enough money for the purchase|  
|  Post condition     | CT.quantity_post > CT.quantity _pre |
| | LaTazzaAccount.balance_post < LaTazzaAccount.balance_pre|
|  Nominal Scenario     | At time of order Administrator records money spent for order. At time of reception administrator selects capsule type CT, increases its quantity by a given number|
|  Variants     |  |

### Use case 5, FR5 Produce report on consumption of colleague

| Actors Involved        | Administrator  |
| ------------- |:-------------:| 
|  Precondition     | Colleague C exists |  
|  Post condition     |  |
|  Nominal Scenario     | Administrator selects colleague C, defines a time range,  application collects all transactions for C (recharges and capsules taken) in the time range and presents them|
|  Variants     | |

### Use case 6, FR6 Produce report on all consumptions

| Actors Involved        | Administrator |
| ------------- |:-------------:| 
|  Precondition     |  |  
|  Post condition     |  |
|  Nominal Scenario     | Administrator defines a time range,  application collects all transactions (recharges, purchases, and capsules taken) in the time range and presents them |
|  Variants     | |


# Relevant scenarios

## Scenario 1

| Scenario ID: SC1        | Corresponds to UC1  |
| ------------- |:-------------| 
| Description | Colleague uses one capsule of type T|
| Precondition |  account of C has enough money to buy capsule T|
| Postcondition |  account of C updated, count of T updated |
| Step#        |  Step description   |
|  1     | Administrator selects capsule type T |  
|  2     |  Administrator selects colleague C |
|  3     | Deduce one for quantity of capsule T |
| 4 | Deduce price of T from account of C|

## Scenario 2

| Scenario ID: SC2        | Corresponds to UC1  |
| ------------- |:-------------| 
| Description | Colleague uses one capsule of type T, account negative|
|Precondition |  account of C has not enough money to buy capsule T|
|Postcondition |  account of C updated, count of T updated |
| Step#        | Step description  |
|  1     | Administrator selects capsule type T |  
|  2     | Administrator selects colleague C |
|  3     | Deduce one for quantity of capsule T  |
|  4     | Deduce price of T from account of C  |
|  5     | Account of C is negative, issue warning  |


# Glossary

```plantuml
class User {
	+ ID
	+ name
	+ surname
	+ email
	+ password
}

class Driver

class Owner

class "Gas station" {
	+ name
	+ logo
	+ latitude
	+ longitude
}

class Fuel {
	+ type
	+ price
}

class Preference {
	+ user id
}

User <|-- Owner
User <|-- Driver
Driver "1"--"0..*" Preference
Preference "0..*"--"0..*" Fuel
"Gas station" "*"--"*" Fuel
Owner "1"--"1..*" "Gas station":owns
```